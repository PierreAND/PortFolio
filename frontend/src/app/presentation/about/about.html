@if (personalInfo()) {
  <div class="backoffice-container">
    <div class="dashboard-header">
      <h1>{{ personalInfo()!.prenom }} {{ personalInfo()!.nom }}</h1>
      <p class="subtitle">Parcours professionnel et certifications</p>
    </div>

    <div class="builds-container">

      <div class="build-item" [class.expanded]="isProfileExpanded()" (click)="toggleProfile()">
        <div class="build-header">
          <div class="build-status-icon success">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
            </svg>
          </div>
          <div class="build-info">
            <div class="build-title">
              Profil Personnel
            </div>
            <div class="build-meta">
              <span class="meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                {{ personalInfo()!.prenom }} {{ personalInfo()!.nom }}
              </span>
              <span class="meta-item">{{ personalInfo()!.age }} ans</span>
            </div>
          </div>
          <span class="build-badge">Informations</span>
          <div class="expand-icon" [class.expanded]="isProfileExpanded()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path d="M6.22 4.22a.75.75 0 011.06 0l3.25 3.25a.75.75 0 010 1.06l-3.25 3.25a.75.75 0 01-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 010-1.06z"/>
            </svg>
          </div>
        </div>
        
        @if (isProfileExpanded()) {
          <div class="build-details">
            <div class="details-section">
              <h3 class="section-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/>
                  <path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"/>
                </svg>
                Informations personnelles
              </h3>
              <div class="info-grid">
                <div class="info-field">
                  <div class="field-label">Loisirs</div>
                  <div class="field-value">{{ personalInfo()!.interet }}</div>
                </div>
                <div class="info-field">
                  <div class="field-label">Compétences</div>
                  <div class="field-value">{{ personalInfo()!.skills }}</div>
                </div>
              </div>
            </div>
          </div>
        }
      </div>

      
      <div class="build-item" [class.expanded]="isDiplomeExpanded()" (click)="toggleDiplome()">
        <div class="build-header">
          <div class="build-status-icon info">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM6.5 5h3a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5zM9 10H7v3.5a.5.5 0 01-1 0V10H4.5a.5.5 0 010-1H6V5.5a.5.5 0 011 0V9h1.5a.5.5 0 010 1z"/>
            </svg>
          </div>
          <div class="build-info">
            <div class="build-title">Formation Académique</div>
            <div class="build-meta">
              <span class="meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                  <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
                </svg>
                Diplôme
              </span>
            </div>
          </div>
          <span class="build-badge">{{ personalInfo()!.diplome.levels }}</span>
          <div class="expand-icon" [class.expanded]="isDiplomeExpanded()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path d="M6.22 4.22a.75.75 0 011.06 0l3.25 3.25a.75.75 0 010 1.06l-3.25 3.25a.75.75 0 01-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 010-1.06z"/>
            </svg>
          </div>
        </div>
        
        @if (isDiplomeExpanded()) {
          <div class="build-details">
            <div class="details-section">
              <h3 class="section-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25V1.75zm1.75-.25a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V1.75a.25.25 0 00-.25-.25H1.75z"/>
                  <path d="M3.5 6.75A.25.25 0 013.75 6.5h8.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-7.5z"/>
                </svg>
                Détails du diplôme
              </h3>
              <div class="diplome-detail-content">
                <div class="diplome-header-info">
                  <h3>{{ personalInfo()!.diplome.name }}</h3>
                  <h4>{{personalInfo()!.diplome.ecole}}</h4>
                  <span class="level-badge">
                    <a class="link-dossier" href="{{ personalInfo()!.diplome.dossier }}" target="_blank">Dossier Professionnel</a></span>
                  </div>
                  <p class="diplome-description">{{ personalInfo()!.diplome.description }}</p>
                </div>
              </div>
            </div>
          }
        </div>
        
        <div class="build-item" [class.expanded]="isCVExpanded()" (click)="toggleCV()">
          <div class="build-header">
            <div class="build-status-icon cv">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-9.5A1.75 1.75 0 012 14.25V1.75zm1.75-.25a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 019 4.25V1.5H3.75zm6.75.062V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011z"/>
            </svg>
          </div>
          <div class="build-info">
            <div class="build-title">Curriculum Vitae</div>
            <div class="build-meta">
              <span class="meta-item">Document PDF</span>
            </div>
          </div>
          <span class="build-badge">Téléchargeable</span>
          <div class="expand-icon" [class.expanded]="isCVExpanded()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path d="M6.22 4.22a.75.75 0 011.06 0l3.25 3.25a.75.75 0 010 1.06l-3.25 3.25a.75.75 0 01-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 010-1.06z"/>
            </svg>
          </div>
        </div>
        
        @if (isCVExpanded()) {
          <div class="build-details">
            <div class="details-section">
              <h3 class="section-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M2.75 14A1.75 1.75 0 011 12.25v-8.5C1 2.784 1.784 2 2.75 2h10.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0113.25 14H2.75z"/>
                </svg>
                Options de téléchargement
              </h3>
              <p class="section-content">Téléchargez mon CV complet au format PDF pour découvrir mon parcours professionnel détaillé.</p>
              <div class="action-buttons">
                <button class="btn" (click)="downloadCV(); $event.stopPropagation()">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M2.75 14A1.75 1.75 0 011 12.25v-2.5a.75.75 0 011.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25v-2.5a.75.75 0 011.5 0v2.5A1.75 1.75 0 0113.25 14H2.75z"/>
                    <path d="M7.25 7.689V2a.75.75 0 011.5 0v5.689l1.97-1.969a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 6.78a.75.75 0 111.06-1.06l1.97 1.969z"/>
                  </svg>
                  Télécharger le CV
                </button>
              </div>
            </div>
          </div>
        }
      </div>
      
      <app-projects></app-projects>
      
      <div class="build-item" [class.expanded]="isCertificationsExpanded()" (click)="toggleCertifications()">
        <div class="build-header">
          <div class="build-status-icon certificate">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path fill-rule="evenodd" d="M8.533.133a1.75 1.75 0 00-1.066 0l-5.25 1.68A1.75 1.75 0 001 3.48V7c0 1.566.32 3.182 1.303 4.682.983 1.498 2.585 2.813 5.032 3.855a1.7 1.7 0 001.33 0c2.447-1.042 4.049-2.357 5.032-3.855C14.68 10.182 15 8.566 15 7V3.48a1.75 1.75 0 00-1.217-1.667L8.533.133zm-.61 1.429a.25.25 0 01.153 0l5.25 1.68a.25.25 0 01.174.238V7c0 1.358-.275 2.666-1.057 3.86-.784 1.194-2.121 2.34-4.366 3.297a.2.2 0 01-.154 0c-2.245-.956-3.582-2.104-4.366-3.298C2.775 9.666 2.5 8.36 2.5 7V3.48a.25.25 0 01.174-.237l5.25-1.68zM11.28 6.28l-3.5 3.5a.75.75 0 01-1.06 0l-1.5-1.5a.75.75 0 111.06-1.06l.97.97 2.97-2.97a.75.75 0 011.06 1.06z"/>
            </svg>
          </div>
          <div class="build-info">
            <div class="build-title">Certifications Professionnelles</div>
            <div class="build-meta">
              <span class="meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg>
                {{ personalInfo()!.certification.length }} certifications
              </span>
            </div>
          </div>
          <span class="build-badge">Compétences certifiées</span>
          <div class="expand-icon" [class.expanded]="isCertificationsExpanded()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
              <path d="M6.22 4.22a.75.75 0 011.06 0l3.25 3.25a.75.75 0 010 1.06l-3.25 3.25a.75.75 0 01-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 010-1.06z"/>
            </svg>
          </div>
        </div>
        
        @if (isCertificationsExpanded()) {
          <div class="build-details">
            <div class="details-section">
              <h3 class="section-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                  <path fill-rule="evenodd" d="M2.5 3.5c0-.133.058-.318.282-.55.227-.237.592-.484 1.1-.708C4.899 1.795 6.354 1.5 8 1.5c1.647 0 3.102.295 4.117.742.51.224.874.47 1.101.707.224.233.282.418.282.551 0 .133-.058.318-.282.55-.227.237-.592.484-1.1.708C11.101 5.205 9.646 5.5 8 5.5c-1.647 0-3.102-.295-4.117-.742-.51-.224-.874-.47-1.101-.707-.224-.233-.282-.418-.282-.551zM1 3.5c0-.626.292-1.165.7-1.59.406-.422.956-.767 1.579-1.041C4.525.32 6.195 0 8 0c1.805 0 3.475.32 4.722.869.622.274 1.172.62 1.578 1.04.408.426.7.965.7 1.591v9c0 .626-.292 1.165-.7 1.59-.406.422-.956.767-1.579 1.041C11.476 15.68 9.806 16 8 16c-1.805 0-3.475-.32-4.721-.869-.623-.274-1.173-.62-1.579-1.04-.408-.426-.7-.965-.7-1.591v-9zM2.5 8V5.724c.241.15.503.286.779.407C4.525 6.68 6.195 7 8 7c1.805 0 3.475-.32 4.722-.869.275-.121.537-.257.778-.407V8c0 .133-.058.318-.282.55-.227.237-.592.484-1.1.708C11.101 9.705 9.646 10 8 10c-1.647 0-3.102-.295-4.117-.742-.51-.224-.874-.47-1.101-.707C2.558 8.318 2.5 8.133 2.5 8zm0 2.225V12.5c0 .133.058.318.282.55.227.237.592.484 1.1.708 1.016.447 2.471.742 4.118.742 1.647 0 3.102-.295 4.117-.742.51-.224.874-.47 1.101-.707.224-.233.282-.418.282-.551v-2.275c-.241.15-.503.285-.779.407-1.247.549-2.917.869-4.721.869-1.805 0-3.475-.32-4.721-.869A6.236 6.236 0 012.5 10.225z"/>
                </svg>
                Liste des certifications
              </h3>
              <div class="certifications-list">
                @for (cert of personalInfo()!.certification; track cert.id) {
                  <div class="certification-card">
                    <div class="cert-header">
                      <h4>{{ cert.name }}</h4>
                      <a class="cert-link" [href]="cert.link" target="_blank" (click)="$event.stopPropagation()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                          <path d="M3.75 2A1.75 1.75 0 002 3.75v8.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 12.25v-3.5a.75.75 0 00-1.5 0v3.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-8.5a.25.25 0 01.25-.25h3.5a.75.75 0 000-1.5h-3.5z"/>
                          <path d="M11 1a.75.75 0 000 1.5h1.44l-4.72 4.72a.75.75 0 001.06 1.06l4.72-4.72v1.44a.75.75 0 001.5 0V1h-4z"/>
                        </svg>
                        Voir
                      </a>
                    </div>
                    <p class="cert-description">{{ cert.description }}</p>
                    <p class="cert-position">{{ cert.poste }}</p>
                  </div>
                }
              </div>
            </div>
          </div>
        }
      </div>
      <app-contact></app-contact>
    </div>
  </div>
}


